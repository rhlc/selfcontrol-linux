#!/usr/bin/env python3
import sys
import os

if os.geteuid() != 0:
    print("Error: selfcontrol-daemon must run as root", file=sys.stderr)
    sys.exit(1)

# When installed, the package lives at /usr/lib/selfcontrol-linux/
# When running from source, it's the parent of this script's directory.
script_dir = os.path.dirname(os.path.abspath(__file__))
project_dir = os.path.dirname(script_dir)

installed_dir = "/usr/lib/selfcontrol-linux"
if os.path.isdir(os.path.join(installed_dir, "selfcontrol")):
    sys.path.insert(0, installed_dir)
else:
    sys.path.insert(0, project_dir)

from selfcontrol_daemon.daemon import SelfControlDaemon

daemon = SelfControlDaemon()
daemon.run()
